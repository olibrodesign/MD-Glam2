<section id="section--{{section.id}}">
    <div class="custom-navigation--wrapper page-width">
        <div class="custom-navigation--header">
            {% if section.settings.show_collections == true %}
                <div class="collection">Filter by category</div>
            {% endif %}
            {% if section.settings.show_concerns == true %}
                <div class="concern">Filter by concern</div>
            {% endif %}
        </div>
        <div class="custom-navigation--body">
            {% if section.settings.show_collections == true %}
                <div class="collections">
                    {%- assign total_product_counts = 0 -%}
                    {% for collection in collections %}
                        <div class="collection" data-collection-url="{{collection.url}}" data-collection-title="{{collection.title}}" data-collection-description="{{collection.description}}" data-product-counts="{{collection.all_products_count}}">{{collection.title}}<span class="product_count">({{collection.all_products_count }})</span></div>
                        {%- assign total_product_counts = total_product_counts | plus: collection.all_products_count -%}
                    {% endfor %}
                    <div class="collection" data-collection-url="/collections/all">All category<span class="product_count">({{total_product_counts}})</span></div>
                </div>
            {% endif %}
            {% if section.settings.show_concerns == true %}
                <div class="concerns">
                    {% comment %} {% assign filter_tags = '' %}
                    {% for product in collections.all.products %}
                        {% for tag in product.tags %}
                            {% unless  tag contains "anti-aging" or tag contains "Nourishing & Hydrating" or tag contains "Protective & Preventative" %}
                                {% unless filter_tags contains tag %}
                                    {% assign filter_tags = filter_tags | append: ',' | append: tag %}
                                {% endunless %}
                            {% endunless %}
                            
                        {% endfor %}
                    {% endfor %}
                    {% assign filter_tags_array = filter_tags | split: ',' %}
                    {% for tag in filter_tags_array %}
                        {% unless tag == '' %}
                            <div class="concern" data-tag = "{{tag}}">{{tag}}</div>
                        {% endunless %}
                    {% endfor %} {% endcomment %}
                    <div class="concern" data-tag = "Fine Lines & Wrinkles">FINE LINES & WRINKLES</div>
                    <div class="concern" data-tag = "Uneven Texture">UNEVEN TEXTURE</div>
                    <div class="concern" data-tag = "Collagen Building">COLLAGEN BUILDING</div>
                    <div class="concern" data-tag = "Pores & Breakouts">PORES & BREAKOUTS</div>
                    <div class="concern" data-tag = "Hyperpigmentation">HYPERPIGMENTATION</div>
                    <div class="concern" data-tag = "Sun Damage">SUN DAMAGE</div>
                </div>
            {% endif %}
        </div>
    </div>
</section>
{% schema %}
    {
        "name": "Custom navigation",
        "class": "custom-navigation",
        "settings": [
            {
                "type": "header",
                "content": "QUICK LINKS"
            },
            {
                "type": "checkbox",
                "id": "show_collections",
                "label": "Show Collections filter",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "show_concerns",
                "label": "Show Concern filter",
                "default": true
            }
        ]
    }
{% endschema %}